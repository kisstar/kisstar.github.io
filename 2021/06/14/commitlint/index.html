<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Git Commit 规范 | Kisstar&#39;s 博客</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.f97a10dc.css" as="style"><link rel="preload" href="/assets/js/app.30f6d32c.js" as="script"><link rel="preload" href="/assets/js/4.ee91810f.js" as="script"><link rel="preload" href="/assets/js/9.16ebc7cc.js" as="script"><link rel="prefetch" href="/assets/js/10.2593e563.js"><link rel="prefetch" href="/assets/js/11.77a5201c.js"><link rel="prefetch" href="/assets/js/12.cc794553.js"><link rel="prefetch" href="/assets/js/13.9d97a265.js"><link rel="prefetch" href="/assets/js/14.70473368.js"><link rel="prefetch" href="/assets/js/15.29cfd57e.js"><link rel="prefetch" href="/assets/js/16.1575169a.js"><link rel="prefetch" href="/assets/js/3.be2ed30f.js"><link rel="prefetch" href="/assets/js/5.0584d058.js"><link rel="prefetch" href="/assets/js/6.40c25e23.js"><link rel="prefetch" href="/assets/js/7.2fa3d41f.js"><link rel="prefetch" href="/assets/js/8.690e96e5.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.3a209bc1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f97a10dc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container post"><div class="theme-extreme"><header class="navbar fixed"><a href="/" class="navbar-brand router-link-active"><img src="/assets/img/logo.46de8c82.png" alt="Kisstar's 博客" class="logo"> <span>Kisstar's 博客</span></a> <button type="button" class="navbar-toggler"><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="48" height="36"><path d="M128 469.333333m40.533333 0l686.933334 0q40.533333 0 40.533333 40.533334l0 4.266666q0 40.533333-40.533333 40.533334l-686.933334 0q-40.533333 0-40.533333-40.533334l0-4.266666q0-40.533333 40.533333-40.533334Z" fill="white"></path> <path d="M128 682.666667m40.533333 0l686.933334 0q40.533333 0 40.533333 40.533333l0 4.266667q0 40.533333-40.533333 40.533333l-686.933334 0q-40.533333 0-40.533333-40.533333l0-4.266667q0-40.533333 40.533333-40.533333Z" fill="white"></path> <path d="M128 256m40.533333 0l686.933334 0q40.533333 0 40.533333 40.533333l0 4.266667q0 40.533333-40.533333 40.533333l-686.933334 0q-40.533333 0-40.533333-40.533333l0-4.266667q0-40.533333 40.533333-40.533333Z" fill="white"></path></svg></button> <div class="navbar-collapse"><ul class="navbar-nav"><li class="navbar-item"><a href="https://juejin.cn/user/870468942050759" target="_blank" rel="noopener noreferrer">
  掘金
</a></li><li class="navbar-item"><a href="https://segmentfault.com/u/dongwanhong/" target="_blank" rel="noopener noreferrer">
  思否
</a></li><li class="navbar-item"><a href="https://dongwanhong.gitee.io/notebook/" target="_blank" rel="noopener noreferrer">
  笔记
</a></li><li class="navbar-item"><a href="https://dongwanhong.gitee.io/source-code/" target="_blank" rel="noopener noreferrer">
  案列
</a></li><li class="navbar-item"><a href="https://github.com/kisstar" target="_blank" rel="noopener noreferrer">
  GitHub
</a></li></ul></div></header> <main class="theme-content"><article class="post-body"><div class="post-meta"><h1>Git Commit 规范</h1> <div class="post-meta-author"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><polygon points="3 11 22 2 13 21 11 13 3 11"></polygon></svg> <span>Kisstar</span> <span> 在北京</span></div> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><circle cx="12" cy="12" r="10"></circle> <polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate datetime="2021-06-14T00:00:00.000Z">
      2021-06-14
    </time></div> <ul class="post-meta-tags"><li class="post-tag"><a href="/tag/Git"><span>Git</span></a></li></ul></div> <div class="content__default"><p><img src="/images/git/git.png" alt="git" style="width:100%;height:350px;box-shadow:rgba(0, 0, 0, 0.1) -4px 9px 25px -6px;"></p> <p>每一条提交信息都应该是有意义的，遵循规范的友好提交信息更能体现出它的价值。</p> <ul><li>高可读性: 利于 CR，Reviewer 可以明确本次提交的目的。</li> <li>方便分类: 自动生成变更日志。对于一些 SDK 而言，可以查看每次版本升级的改动点。</li> <li>利于追溯: 定位问题时可以快速确定范围（代码、影响）。</li></ul> <h2 id="conventional-commits"><a href="#conventional-commits" class="header-anchor">#</a> Conventional Commits</h2> <p>社区有多种 Commit message 的写法规范，其中 <a href="https://conventionalcommits.org/" target="_blank" rel="noopener noreferrer">Conventional Commits 规范<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 是目前使用比较广的，其中各项规定也比较合理和系统化。</p> <p>在该规范下，提交消息的结构应如下所示：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&lt;</span>type<span class="token operator">&gt;</span><span class="token punctuation">[</span>optional scope<span class="token punctuation">]</span>: <span class="token operator">&lt;</span>description<span class="token operator">&gt;</span>

<span class="token punctuation">[</span>optional body<span class="token punctuation">]</span>

<span class="token punctuation">[</span>optional footer<span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">]</span>
</code></pre></div><p><code>type</code> 是必须的，指定了本次提交的类型，用于向库的使用者传达意图：</p> <ul><li>feat: 添加新功能。</li> <li>fix: 修复问题。</li> <li>docs: 更新文档。</li> <li>style: 代码格式化相关，与功能无关的改动。</li> <li>chore: 改变构建流程，依赖库，工具等。</li> <li>build：构建项目。</li> <li>perf：性能优化。</li> <li>refactor：重构代码。</li> <li>ci：CI 相关修改。</li> <li>test：测试用例相关修改。</li></ul> <p><code>scope</code> 是可选的，用以描述本次修改涉及的范围。范围必须由一个名词组成。</p> <p><code>description</code> 是必须的，而且必须紧跟在冒号后面，并在类型/作用域前缀后面加空格，作为代码更改的简短摘要。</p> <p><code>body</code> 是可选的，由任意数量的换行分隔段落组成，提供有关代码更改的附加上下文信息。</p> <p><code>footer</code> 也是可选的，通常用来关联 ISSUE 和描述是否是 Break Chage 等。</p> <h2 id="commitlint"><a href="#commitlint" class="header-anchor">#</a> Commitlint</h2> <p>现在规范已经有了，接下来需要保证大家能够遵守规范。和 ESLint 一样，Commitlint 自身提供了检测的功能和一些最基础的规则。</p> <p>按照官网的介绍，Commitlint 会检查提交消息是否符合上面我们介绍的规范。要在项目中使用 Commitlint 需要先按照相关的依赖：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># @commitlint/config-conventional 遵循了 Conventional Commits 规范</span>
<span class="token function">yarn</span> <span class="token function">add</span> -D @commitlint/cli @commitlint/config-conventional
</code></pre></div><p>然后，进行简单的配置：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;module.exports = {extends: ['@commitlint/config-conventional']};&quot;</span> <span class="token operator">&gt;</span> commitlint.config.js
</code></pre></div><p>更进一步，我们还可以配合 Git 的钩子进行自动校验：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># Install Husky v6</span>
<span class="token function">yarn</span> <span class="token function">add</span> husky --dev

<span class="token comment"># Activate hooks</span>
<span class="token function">yarn</span> husky <span class="token function">install</span>

<span class="token comment"># Add hook</span>
npx husky <span class="token function">add</span> .husky/commit-msg <span class="token string">'npx --no-install commitlint --edit &quot;$1&quot;'</span>
</code></pre></div><p>现在，规范终于落地了。</p> <h2 id="adapter"><a href="#adapter" class="header-anchor">#</a> Adapter</h2> <p>刚开始使用的时候，我们对提交规范可能会比较陌生，不知道存在哪些选项，又或者需要怎样选择，因此交互式的提交方式是有必要的。</p> <p>官方提供了 <code>@commitlint/prompt-cli</code> 来帮助快速编写提交消息，并确保它们遵守在配置文件中配置的提交约定。</p> <p>由于其交互模式差强人意，人们使用更多的提交工具是 Commitizen，当你使用它进行提交时系统也将提示你需要填写的所有必需提交字段。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> -D commitizen
</code></pre></div><p>它提供了一个 <code>git-cz</code> 命令，用于代替 <code>git commit</code> 进行提交：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;commit&quot;</span><span class="token operator">:</span> <span class="token string">&quot;git-cz&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如果你没有任何配置那么它和普通的提交方式一样，而当你通过配置指定 Adapter 后就可以进行交互式的提交。</p> <p>适配器 <code>@commitlint/cz-commitlint</code> 可以让 Commitizen 和 Commitizen 协同工作，将提交交给前者处理，后者负责进行校验。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> -D @commitlint/cz-commitlint
</code></pre></div><div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;config&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;commitizen&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;@commitlint/cz-commitlint&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>目前，应该已经满足我们在个人开发时的需要了。</p> <h2 id="自定义规范"><a href="#自定义规范" class="header-anchor">#</a> 自定义规范</h2> <p>如果你觉得其中一些规则并不合需求，你也可以根据需要进行自定义，在一些团队协同中，这可能是比较常见的需求。</p> <p>对于默认支持的规则，你可以在配置文件（./commitlint.config.js）的 <code>rules</code> 字段进行配置。配置项由名称和配置数组组成，配置数组的项包含：</p> <ul><li>Level: 0 - 禁用，1 - 警告，2 - 错误。</li> <li>Applicable: always|never，never 表示反转规则。</li> <li>Value: 用于此规则的值。</li></ul> <p>具体在配置时支持以下几种方式：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Plain array</span>
<span class="token punctuation">{</span>
  rules<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">'header-max-length'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'always'</span><span class="token punctuation">,</span> <span class="token number">72</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// Function returning array</span>
<span class="token punctuation">{</span>
  rules<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">'header-max-length'</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'always'</span><span class="token punctuation">,</span> <span class="token number">72</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// Async function returning array</span>
<span class="token punctuation">{</span>
  rules<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">'header-max-length'</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'always'</span><span class="token punctuation">,</span> <span class="token number">72</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// Function returning a promise resolving to array</span>
<span class="token punctuation">{</span>
  rules<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">'header-max-length'</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'always'</span><span class="token punctuation">,</span> <span class="token number">72</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>你可以在<a href="https://commitlint.js.org/#/reference-rules" target="_blank" rel="noopener noreferrer">这里<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>看到所有默认支持的配置项。</p> <p>另外，每个插件可以导出一个包含额外规则的 <code>rules</code> 对象，其中 <code>key</code> 为规则的名称、值为校验函数。</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  rules<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">'dollar-sign'</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">parsed<span class="token punctuation">,</span> when<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// rule implementation ...</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>使用时，在配置文件中通过 <code>extends</code> 字段进行引用，然后同样按照上面的配置方式进行配置。</p> <h2 id="自定义-adapter"><a href="#自定义-adapter" class="header-anchor">#</a> 自定义 Adapter</h2> <p>当你的规范改变后，之前的 Adapter 可能就无法适配了。此时你可以通过 <code>prompt</code> 字段对交互提示的内容进行调整。</p> <p>在该字段中主要包括 <code>messages</code> 和 <code>questions</code> 两部分，前者主要是一些提示信息，包括最大和最小长度的限制。</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  prompt<span class="token operator">:</span> <span class="token punctuation">{</span>
    messages<span class="token operator">:</span> <span class="token punctuation">{</span>
      skip<span class="token operator">:</span> <span class="token string">'(press enter to skip)'</span><span class="token punctuation">,</span> <span class="token comment">// 提示如何跳过</span>
      max<span class="token operator">:</span> <span class="token string">'upper %d chars'</span><span class="token punctuation">,</span> <span class="token comment">// 提示最大字符数</span>
      min<span class="token operator">:</span> <span class="token string">'%d chars at least'</span><span class="token punctuation">,</span> <span class="token comment">// 提示最小字符数</span>
      emptyWarning<span class="token operator">:</span> <span class="token string">'can not be empty'</span><span class="token punctuation">,</span> <span class="token comment">// 字段不能为空</span>
      upperLimitWarning<span class="token operator">:</span> <span class="token string">'over limit'</span><span class="token punctuation">,</span> <span class="token comment">// 超过字符限制</span>
      lowerLimitWarning<span class="token operator">:</span> <span class="token string">'below limit'</span><span class="token punctuation">,</span> <span class="token comment">// 字符数小于下限</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>后者则是针对各个块的问题描述，通过 <code>enum</code> 字段还可以设置可选列表：</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  prompt<span class="token operator">:</span> <span class="token punctuation">{</span>
    questions<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token punctuation">{</span>
        description<span class="token operator">:</span> <span class="token string">&quot;Select the type of change that you're committing&quot;</span><span class="token punctuation">,</span>
        <span class="token keyword">enum</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          feat<span class="token operator">:</span> <span class="token punctuation">{</span>
            description<span class="token operator">:</span> <span class="token string">'A new feature'</span><span class="token punctuation">,</span>
            title<span class="token operator">:</span> <span class="token string">'Features'</span><span class="token punctuation">,</span>
            emoji<span class="token operator">:</span> <span class="token string">'✨'</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      scope<span class="token operator">:</span> <span class="token punctuation">{</span>
        description<span class="token operator">:</span>
          <span class="token string">'What is the scope of this change (e.g. component or file name)'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>你可以在<a href="https://commitlint.js.org/#/reference-prompt" target="_blank" rel="noopener noreferrer">这里<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>查看到更多相关信息。</p> <h2 id="其它配置"><a href="#其它配置" class="header-anchor">#</a> 其它配置</h2> <p>除了上面提到了一些配置项外，你还可以针对解析器等做进一步的配置：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> Configuration <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">/*
   * Resolve and load @commitlint/config-conventional from node_modules.
   * Referenced packages must be installed
   */</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'@commitlint/config-conventional'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">/*
   * Resolve and load conventional-changelog-atom from node_modules.
   * Referenced packages must be installed
   */</span>
  parserPreset<span class="token operator">:</span> <span class="token string">'conventional-changelog-atom'</span><span class="token punctuation">,</span>
  <span class="token comment">/*
   * Resolve and load @commitlint/format from node_modules.
   * Referenced package must be installed
   */</span>
  formatter<span class="token operator">:</span> <span class="token string">'@commitlint/format'</span><span class="token punctuation">,</span>
  <span class="token comment">/*
   * Functions that return true if commitlint should ignore the given message.
   */</span>
  ignores<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token parameter">commit</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> commit <span class="token operator">===</span> <span class="token string">''</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">/*
   * Whether commitlint uses the default ignore rules.
   */</span>
  defaultIgnores<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token comment">/*
   * Custom URL to show upon failure
   */</span>
  helpUrl<span class="token operator">:</span>
    <span class="token string">'https://github.com/conventional-changelog/commitlint/#what-is-commitlint'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> Configuration<span class="token punctuation">;</span>
</code></pre></div><p>除了对 Commitlint 进行配置外，你还可以自定义符合 Commitizen 规范的 Adapter，定制方式可以参考现有的<a href="https://github.com/commitizen/cz-cli#adapters" target="_blank" rel="noopener noreferrer">列表<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>在一个全新的项目中，如果你们没有特殊要求，使用 Conventional Commits 规范你只需要安装一下依赖，添加钩子校验：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> -D @commitlint/cli @commitlint/config-conventional

<span class="token comment"># Install Husky v6</span>
<span class="token function">yarn</span> <span class="token function">add</span> husky --dev

<span class="token comment"># Activate hooks</span>
<span class="token function">yarn</span> husky <span class="token function">install</span>

<span class="token comment"># Add hook</span>
npx husky <span class="token function">add</span> .husky/commit-msg <span class="token string">'npx --no-install commitlint --edit &quot;$1&quot;'</span>

<span class="token function">yarn</span> <span class="token function">add</span> -D @commitlint/cz-commitlint commitizen
</code></pre></div><p>然后，再添加上命令和交互式配置就可以了：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;commit&quot;</span><span class="token operator">:</span> <span class="token string">&quot;git-cz&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;config&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;commitizen&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;@commitlint/cz-commitlint&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="建议"><a href="#建议" class="header-anchor">#</a> 建议</h2> <ul><li>勤于提交：方便 CR，及时发现问题，同时也能避免代码丢失。</li> <li>能 Rebase 就不要 Merge：清晰的提交历史便于大家追溯问题，回滚代码。</li></ul> <h2 id="参考"><a href="#参考" class="header-anchor">#</a> 参考</h2> <ul><li><a href="https://commitlint.js.org/#/" target="_blank" rel="noopener noreferrer">commitlint - Lint commit messages<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://kisstar.github.io/notebook/project/basis/commit-lint.html" target="_blank" rel="noopener noreferrer">书写友好的提交信息 | notes | Kisstar<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.yuque.com/iyum9i/uur0qi/gg4kt7#BTuyT" target="_blank" rel="noopener noreferrer">commitlint 落地推广 · 语雀<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/streamich/git-cz" target="_blank" rel="noopener noreferrer">streamich/git-cz: Semantic Git commits<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/kisstar/blog/edit/master/packages/docs/posts/posts/git/2021-06-14-commitlint.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a></div> <div class="last-updated"><span class="prefix">最近更新:</span> <span class="time">2021-06-14 19:06:48</span></div></div> <div class="divider horizontal"></div> <div class="page-nav"><!----> <div class="next"><a href="/2021/05/10/parallax-scrolling/">
  视差滚动
</a> <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="12" height="12"><path d="M948.064 513.056L536.064 925.312a47.296 47.296 0 0 1-66.88-66.88l345.504-345.504L467.52 165.76a47.296 47.296 0 0 1 66.88-66.88l38.688 38.688-0.256 0.256 375.264 375.264m-378.336-0.032L157.76 925.312a47.296 47.296 0 0 1-66.88-66.88l345.472-345.504L89.184 165.76a47.296 47.296 0 0 1 66.88-66.88l38.688 38.688-0.256 0.256 375.264 375.264" fill="currentColor"></path></svg></div></div> <!----> <div class="over-tip">到底了，再怎么滑也没有了 ^_^</div></article></main> <footer class="footer"><div class="copyright-container"><p>
      Theme developed by
      <a href="https://github.com/kisstar/" target="_blank" rel="noopener noreferrer">
  Kisstar
</a>
      &amp; Powered by
      <a href="https://vuepress.vuejs.org/" target="_blank" rel="noopener noreferrer">
  VuePress
</a>
      .
    </p> <p>Copyright © 2020. All Rights Reserved.</p></div></footer></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.30f6d32c.js" defer></script><script src="/assets/js/4.ee91810f.js" defer></script><script src="/assets/js/9.16ebc7cc.js" defer></script>
  </body>
</html>
