<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>音视频基础概念 | Kisstar's 博客</title>
    <meta name="description" content="Kisstar's 的个人博客站点。">
    <link rel="preload stylesheet" href="/assets/style.5086de7b.css" as="style">
    
    <script type="module" src="/assets/app.c1c2825d.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.eecc699f.js">
    <link rel="modulepreload" href="/assets/chunks/theme.213b108a.js">
    <link rel="modulepreload" href="/assets/posts_video_2021-09-12-video-basic.md.02ce641e.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-eff2d9f0><!--[--><!--]--><!--[--><span tabindex="-1" data-v-9641289a></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-9641289a> Skip to content </a><!--]--><!----><header class="VPNav" data-v-eff2d9f0 data-v-2e0fbc41><div class="VPNavBar" data-v-2e0fbc41 data-v-5b3ad17e><div class="container" data-v-5b3ad17e><div class="title" data-v-5b3ad17e><div class="VPNavBarTitle" data-v-5b3ad17e data-v-dbaa6e97><a class="title" href="/" data-v-dbaa6e97><!--[--><!--]--><!----><!--[-->Kisstar&#39;s 博客<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-5b3ad17e><div class="curtain" data-v-5b3ad17e></div><div class="content-body" data-v-5b3ad17e><!--[--><!--]--><div class="VPNavBarSearch search" data-v-5b3ad17e><!----></div><!----><!----><div class="VPNavBarAppearance appearance" data-v-5b3ad17e data-v-2397613a><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-2397613a data-v-48a070cb data-v-daf23560><span class="check" data-v-daf23560><span class="icon" data-v-daf23560><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-48a070cb><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-48a070cb><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-5b3ad17e data-v-c737ce0e data-v-1bf78fa1><!--[--><a class="VPSocialLink no-icon" href="https://github.com/kisstar" aria-label="github" target="_blank" rel="noopener" data-v-1bf78fa1 data-v-6efba382><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-5b3ad17e data-v-71724fcd data-v-72298b7f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-72298b7f><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-72298b7f><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-72298b7f><div class="VPMenu" data-v-72298b7f data-v-d0374188><!----><!--[--><!--[--><!----><div class="group" data-v-71724fcd><div class="item appearance" data-v-71724fcd><p class="label" data-v-71724fcd>Appearance</p><div class="appearance-action" data-v-71724fcd><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-71724fcd data-v-48a070cb data-v-daf23560><span class="check" data-v-daf23560><span class="icon" data-v-daf23560><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-48a070cb><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-48a070cb><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-71724fcd><div class="item social-links" data-v-71724fcd><div class="VPSocialLinks social-links-list" data-v-71724fcd data-v-1bf78fa1><!--[--><a class="VPSocialLink no-icon" href="https://github.com/kisstar" aria-label="github" target="_blank" rel="noopener" data-v-1bf78fa1 data-v-6efba382><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-5b3ad17e data-v-1a6a9b51><span class="container" data-v-1a6a9b51><span class="top" data-v-1a6a9b51></span><span class="middle" data-v-1a6a9b51></span><span class="bottom" data-v-1a6a9b51></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav fixed reached-top" data-v-eff2d9f0 data-v-4758a42b><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-4758a42b data-v-7a313dc7><button data-v-7a313dc7>Return to top</button><!----></div></div><!----><div class="VPContent" id="VPContent" data-v-eff2d9f0 data-v-34d31248><div class="VPDoc has-aside" data-v-34d31248 data-v-536731fa><!--[--><!--]--><div class="container" data-v-536731fa><div class="aside" data-v-536731fa><div class="aside-curtain" data-v-536731fa></div><div class="aside-container" data-v-536731fa><div class="aside-content" data-v-536731fa><div class="VPDocAside" data-v-536731fa data-v-65d9a64f><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-65d9a64f data-v-323320c0><div class="content" data-v-323320c0><div class="outline-marker" data-v-323320c0></div><div class="outline-title" role="heading" aria-level="2" data-v-323320c0>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-323320c0><span class="visually-hidden" id="doc-outline-aria-label" data-v-323320c0> Table of Contents for current page </span><ul class="root" data-v-323320c0 data-v-5b72f261><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-65d9a64f></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-536731fa><div class="content-container" data-v-536731fa><!--[--><!--]--><!----><main class="main" data-v-536731fa><div style="position:relative;" class="vp-doc _posts_video_2021-09-12-video-basic" data-v-536731fa><div><img style="width:100%;height:350px;" src="/images/video/video.jpeg" alt="video"><p>视频是一种电子媒体，主要是用于记录、复制、播放、广播和显示移动的。</p><p>连续的图像变化每秒超过 24 帧（frame）画面时，根据视觉暂留原理，人眼无法辨别单幅的静态画面；看上去是平滑连续的视觉效果，这样连续的画面就称做视频。</p><h2 id="封装格式" tabindex="-1">封装格式 <a class="header-anchor" href="#封装格式" aria-label="Permalink to &quot;封装格式&quot;">​</a></h2><p>为了适应存储视频的需要，人们设定了不同的视频文件格式来把视频和音频放在一个文件中，以便回放。视频文件格式具有许多类别，包括 MP4、mov、AVI、flv 等。</p><p>我们常常提到的这些视频文件格式其实是视频的封装格式，也就是视频容器。通俗来讲，视频轨就相当于饭，而音频轨相当于菜，封装格式就是一个碗，用来盛放饭菜的容器。</p><table><thead><tr><th style="text-align:left;">扩展名</th><th style="text-align:left;">特点</th></tr></thead><tbody><tr><td style="text-align:left;">AVI</td><td style="text-align:left;">采用有损压缩，压缩比高，解决了音频与视频信息的同步问题，成为了 Windows 视频文件的标准。</td></tr><tr><td style="text-align:left;">MPG</td><td style="text-align:left;">按照 MPEG 标准压缩的全部视频文件。</td></tr><tr><td style="text-align:left;">WMV</td><td style="text-align:left;">独立于编码方式的标准，可以直接在网上实时观看的视频，属于网络流媒体。</td></tr><tr><td style="text-align:left;">rm</td><td style="text-align:left;">压缩比高，文件小、适合网络传输，属于流媒体文件格式。</td></tr><tr><td style="text-align:left;">ASF</td><td style="text-align:left;">可以直接在网上观看的视频文件格式，压缩和图像质量高，属于流媒体格式。</td></tr><tr><td style="text-align:left;">FLV</td><td style="text-align:left;">增长最快、最为广泛的视频文件格式，许多视频网站都采用此视频格式，属于流媒体格式。</td></tr></tbody></table><h2 id="数字图像" tabindex="-1">数字图像 <a class="header-anchor" href="#数字图像" aria-label="Permalink to &quot;数字图像&quot;">​</a></h2><p>视频画面虽然看起来是连续运动的，但实际上是一系列静止的图像，而每张图像又是由一个个像素组成的。</p><p>假设一个屏幕的分辨率是 1920×1080，说明水平方向有 1920 个像素点，垂直方向有 1080 个像素点，所以整个屏幕就有 1920×1080 个像素点。</p><p><img src="/images/video/resolution.png" alt="resolution"></p><p>每个像素点都由三个子像素点组成。当要显示某篇文字或者某幅图像时，就会把这幅图像的每一个像素点的 RGB 通道分别对应的屏幕位置上的子像素点绘制到屏幕上，从而显示整个图像。</p><p>RGB 颜色模型，是一种加色模型，将红（Red）、绿（Green）、蓝（Blue）三原色的色光以不同的比例相加，以合成产生各种色彩光（RGB 中所谓“多少”就是指亮度，并使用整数来表示。通常，RGB 各有 256 级亮度）。</p><p>那么一个像素点的 RGB 该如何表示呢？通常用 8 个比特来表示一个子像素，也就是 24 个比特一个像素。如此就可以产生一千六百万种颜色组合，对人类的眼睛来说，其中有许多颜色已经无法确切的分辨。</p><img style="height:300px;" src="/images/video/rgb.png" alt="rgb"><p>对于一幅 1920×1080 的图像，如果采用 24 比特模式来存储的话，那么它将占据的大小为：</p><p>$1920<em>1080</em>8*3/8/1024/1024\approx6M$</p><p>可见，每一张图像的裸数据都是很大的。所以就有了图像的压缩格式，比如 JPEG 压缩。不过这种压缩格式并不适用于视频，因为视频还有一个时域上的因素需要考虑，也就是帧间编码。</p><h3 id="yuv" tabindex="-1">YUV <a class="header-anchor" href="#yuv" aria-label="Permalink to &quot;YUV&quot;">​</a></h3><p>事实上，对于视频帧的裸数据多采用 YUV 数据格式进行表示，YUV 主要应用于优化彩色视频信号的传输，使其向后兼容老式黑白电视。与 RGB 视频信号传输相比，YUV 最大的优点在于只需要占用极少的频宽(RGB 要求三个独立的视频信号同时传输)。</p><p>YUV 中“Y”表示明亮度 (Luminance 或 Luma)，也称灰阶值；而“U”和“V”表示的则是色度 (Chrominance 或 Chroma)，它们的作用是描述影像的色彩及饱和度， 用于指定像素的颜色。</p><p><img src="/images/video/ycrcb.png" alt="yCrCb"></p><p>和 RGB 表示图像类似，每个像素点都包含 Y、U、V 分量。但是它的 Y 和 UV 分量是可以分离的，如果没有 UV 分量一样可以显示完整的图像，只不过是黑白的。</p><p>而且，对于采用 YUV 编码的图像来说，并不是每个像素点都需要包含了 Y、U、V 三个分量，根据不同的采样格式，可以每个 Y 分量都对应自己的 UV 分量，也可以几个 Y 分量共用 UV 分量。</p><p>为节省带宽起见，大多数 YUV 格式平均使用的每像素位数都少于 24 位。目前，YUV 图像的主流采样方式有如下三种：</p><ul><li>4:4:4 表示完全取样。</li><li>4:2:2 表示 2:1 的水平取样，垂直完全采样。</li><li>4:2:0 表示 2:1 的水平取样，垂直 2:1 采样。</li></ul><p><img src="/images/video/yuv.png" alt="yuv"></p><p>以 4:2:0 的采样方式为例，它的含义并非不采样 V 分量。而是说，每一行扫描时，只扫描一种色度分量（U 或者 V），并保持和 Y 分量按照 2 : 1 的方式采样。</p><p>同样一幅 1920×1080 的图像，如果采用 YUV 4:2:0 来存储的话，那么它将占据的大小为：</p><p>$(1920<em>1080</em>8+1920<em>1080</em>0.25<em>8</em>2)/8/1024/1024\approx3M$</p><p>可以看到 YUV 4:2:0 采样的图像比 RGB 模型图像节省了一半的存储空间，因此它也是比较主流的采样方式。</p><h3 id="与-rgb-之间的关系" tabindex="-1">与 RGB 之间的关系 <a class="header-anchor" href="#与-rgb-之间的关系" aria-label="Permalink to &quot;与 RGB 之间的关系&quot;">​</a></h3><p>YUV 作为一种颜色编码系统，许多专有名词都被称作此名，在数字图像领域中的更多的是指 YCbCr。后者不是一种绝对色彩空间，而是 YUV 压缩和偏移的版本。</p><p>在 YCbCr 中，Y 与 YUV 中的 Y 含义一致，Cb 和 Cr 与 UV 同样都指色彩，Cb 指蓝色色度（反应了 RGB 输入信号蓝色部分与 RGB 信号亮度值之间的差异），Cr 则是指红色色度。</p><img style="height:400px;" src="/images/video/uv.png" alt="uv"><p>虽然 YUV 颜色空间在传输时可以减少带宽，但是在渲染到屏幕上时(文字、图片或者其他)，都要转换为 RGB 的表示形式。</p><p>通常，采集图像时需要将 RGB 模型转换到 YUV 模型，显示时再将 YUV 模型转换为 RGB 模型。那么 YUV 的表示形式和 RGB 的表示形式之间是如何进行转换的呢?</p><p>以标清电视和高清电视为例，由于两者间的标准不同所以计算方式也存在差异。在不同的场景下需要大家自行寻找相应的资料，以找出适合的转换矩阵进行转换。</p><h2 id="视频编码" tabindex="-1">视频编码 <a class="header-anchor" href="#视频编码" aria-label="Permalink to &quot;视频编码&quot;">​</a></h2><p>无论是以 RGB 还是以 YCbCr 来直接表示视频的裸数据结果都太大了。试想一下，一步时长为 2 小时、清晰度为 1920x1080P 的电影采用 24bpp 位深度进行存储会有多大？</p><p><img src="/images/video/size.png" alt="size"></p><p>这属实是太夸张了！幸运的是，视频数据具有极强的相关性，也就是说存在大量的冗余信息，包括但不仅是：</p><ul><li>空间冗余性：图像中有许多颜色相同和相近的连续像素组成的区域，像素间具有强相关性。</li><li>时间冗余性：相邻帧的内容极其相似，也就是相邻帧之间存在强相关性。</li><li>视觉冗余性：图像的某些信息超出了人眼的接受力，可以进行忽略。</li></ul><p>所以，我们需要对视频进行编码，通过消除连续图像之间的冗余信息来压缩视频。而要实现压缩，就要设计各种算法，也就是相关的编码技术。</p><p><img src="/images/video/codec.png" alt="codec"></p><p>随着编码技术的发展，人们对视频的压缩程度越来越高，质量也越来越好。在压缩算法中，IPB 帧就是最常见的一种。</p><h3 id="ipb" tabindex="-1">IPB <a class="header-anchor" href="#ipb" aria-label="Permalink to &quot;IPB&quot;">​</a></h3><p>什么是 IPB 帧？I 帧、B 帧以及 P 帧的编码序列和显示序列一样吗？IDR 帧和 I 帧之间的关系是什么，有什么区别？</p><ul><li>I 帧：帧内编码帧，通常是每个 GOP 的第一帧，其自身可以通过视频解压算法解压成一张单独的完整视频画面，可以看作是一个图像经过压缩后的产物，作为随机访问的参考点。</li><li>P 帧：前向预测编码帧，通过将图像序列中前面已编码帧的时间冗余信息充分去除来压缩传输数据量的编码图像，需要参考其前面的一个 I 帧或者 P 帧来解码成一张完整的视频画面。</li><li>B 帧：双向预测内插编码帧，既考虑源图像序列前面的已编码帧，又顾及源图像序列后面的已编码帧之间的时间冗余信息，来压缩传输数据量的编码图像，也称为双向预测帧。</li></ul><p>在没有 B 帧的情况下，DTS（解码时间戳，告诉播放器该在什么时候解码这一帧的数据）和 PTS（告诉播放器该在什么时候显示这一帧的数据）的输出顺序是一样的；反之，则不同。</p><p>比如一个视频中，帧的显示顺序是：I B B P，而在解码 B 帧时需要知道 P 帧中信息，所以需要先对 P 帧进行解码。</p><p><img src="/images/video/dpts.png" alt="dpts"></p><p>另外，由于 H264 采用了多帧预测，所以 I 帧之后的 P 帧有可能会参考 I 帧之前的帧，而 IDR 帧 就是一种特殊的 I 帧，即这一帧之后的所有参考帧只会参考到这个 IDR 帧，而不会再参考前面的帧。</p><h2 id="数字音频" tabindex="-1">数字音频 <a class="header-anchor" href="#数字音频" aria-label="Permalink to &quot;数字音频&quot;">​</a></h2><p>在一个视频当中除了图像之外通常还包含一些音频数据，记录着我们听到的声音。声音是由物体振动产生的声波，通过介质（例如：空气）向外传播，并能被人的听觉感官所感知的波动现象。</p><p>声音的三要素是音高、响度（音量）、音色，对应声波的三要素频率、振幅和波形。频率代表音阶的高低（频率高、波长短，则音&quot;高&quot;），振幅代表响度，波形代表音色。</p><p>由于计算机只认识 0 和 1，所以我们需要将连续的模拟声波波形转换为连串的二进制数。为此，我们需要对模拟信号进行采样、量化和编码。</p><p><img src="/images/video/sampling.png" alt="sampling"></p><p>根据奈奎斯特定理(也称为采样定理)，按比声音最高频率高 2 倍以上的频率对声音进行采样(也称为 AD 转换)。人类耳朵的听力有一个频率范围，大约是 20Hz~20kHz，所以采样频率一般为 44.1kHz。</p><p>那么，具体的每个采样又该如何表示呢？这就需要在幅度轴上对信号进行量化。</p><p><img src="/images/video/quantification.png" alt="quantification"></p><p>量化是指在幅度轴上对信号进行数字化，比如用 16 比特 的二进制信号来表示声音的一个采样，而 16 比特(一个 short)所表示的 范围是[-32768，32767]，共有 65536 个可能取值，因此最终模拟的音频 信号在幅度上也分为了 65536 层。</p><h2 id="音频编码" tabindex="-1">音频编码 <a class="header-anchor" href="#音频编码" aria-label="Permalink to &quot;音频编码&quot;">​</a></h2><p>通常所说的音频的裸数据格式就是脉冲编码调制（PCM）数据。描述一段 PCM 数据一般需要以下几个概念：量化格式、采样率、声道数。</p><p>以 CD 的音质为例：量化格式（位深度）为 16 比特(2 字节)，采样率为 44100，声道数为 2，这些信息就描述了 CD 的音质。</p><p>那么在 1 分钟里，对于这类 CD 音质的数据在需要占据多大的存储空间呢？</p><p>$44100x16x2x60/8/1024/1024\approx10M$</p><p>可见，未经处理的音频裸数据是非常占据存储资源的。为此，和视频编码处理类似，需要压缩掉声音中的冗余信号（不能被人耳感知到的信号）。</p><p>根据不同的应用场景（包括存储设备、传输网络环境、播放设备等），可以选用不同的压缩编码算法，如 PCM、WAV、AAC、MP3、 Ogg 等。</p><table><thead><tr><th style="text-align:left;">扩展名</th><th style="text-align:left;">特点</th><th style="text-align:left;">适用场合</th></tr></thead><tbody><tr><td style="text-align:left;">WAV</td><td style="text-align:left;">音质非常好，大量软件都支持。</td><td style="text-align:left;">多媒体开发的中间文件、保存音乐和音效素材。</td></tr><tr><td style="text-align:left;">MP3</td><td style="text-align:left;">压缩比比较高，大量软件和硬件都支持，兼容性好。</td><td style="text-align:left;">高比特率下对兼容性有要求的音乐欣赏。</td></tr><tr><td style="text-align:left;">AAC</td><td style="text-align:left;">在小于 128Kbit/s 的码率下表现优异，并且多用于视频中的音频编码。</td><td style="text-align:left;">多用于视频中音频轨的编码。</td></tr><tr><td style="text-align:left;">Ogg</td><td style="text-align:left;">高中低码率下均有良好的表现，兼容性不够好，流媒体特性不支持。</td><td style="text-align:left;">语音聊天的音频消息场景。</td></tr></tbody></table><h2 id="流媒体协议" tabindex="-1">流媒体协议 <a class="header-anchor" href="#流媒体协议" aria-label="Permalink to &quot;流媒体协议&quot;">​</a></h2><p>在了解了视频的组成之后，我们再回来看看视频是如何在网络中传播的。想要在网络中进行传播，那么服务器与客户端都需要遵循一定的协议才能实现数据的传输与解析。</p><p>现如今已经存在许多种流媒体协议了，协议之间各有优劣，将来还会有更多的机构制定、推出不同的协议，以解决现有的问题。</p><table><thead><tr><th style="text-align:left;">名称</th><th style="text-align:left;">推出机构</th><th style="text-align:left;">传输层协议</th><th style="text-align:left;">客户端</th><th style="text-align:left;">目前使用领域</th></tr></thead><tbody><tr><td style="text-align:left;">RTSP+RTP</td><td style="text-align:left;">IETF</td><td style="text-align:left;">TCP+UDP</td><td style="text-align:left;">VLC, WMP</td><td style="text-align:left;">IPTV</td></tr><tr><td style="text-align:left;">RTMP</td><td style="text-align:left;">Adobe Inc.</td><td style="text-align:left;">TCP</td><td style="text-align:left;">Flash</td><td style="text-align:left;">互联网直播</td></tr><tr><td style="text-align:left;">RTMFP</td><td style="text-align:left;">Adobe Inc.</td><td style="text-align:left;">UDP</td><td style="text-align:left;">Flash</td><td style="text-align:left;">互联网直播</td></tr><tr><td style="text-align:left;">MMS</td><td style="text-align:left;">Microsoft Inc.</td><td style="text-align:left;">TCP/UDP</td><td style="text-align:left;">WMP</td><td style="text-align:left;">互联网直播+点播</td></tr><tr><td style="text-align:left;">HTTP</td><td style="text-align:left;">WWW+IETF</td><td style="text-align:left;">TCP</td><td style="text-align:left;">Flash</td><td style="text-align:left;">互联网点播</td></tr><tr><td style="text-align:left;">HLS</td><td style="text-align:left;">Apple Inc.</td><td style="text-align:left;">TCP</td><td style="text-align:left;">iOS, macOS</td><td style="text-align:left;">互联网直播+点播</td></tr></tbody></table><p>总的来说，基于 TCP 的协议传输更加可靠，但是会有抖动、延迟等问题；而基于 UDP 的协议虽然抖动和延迟情况会好些，但是存在丢包的情况。所以实际业务中需要根据需求进行选择，亦或是自制。</p><h2 id="播放流程" tabindex="-1">播放流程 <a class="header-anchor" href="#播放流程" aria-label="Permalink to &quot;播放流程&quot;">​</a></h2><p>在通过不同的协议获取到视频之后就可以交给播放器进行播放了。频播放器播放一个互联网上的视频文件，需要经过以下几个步骤：解协议，解封装，解码和音视频同步。</p><img style="height:450px;" src="/images/video/play.png" alt="play"><p>视频的播放和之前的采集、编码等操作刚好是相逆的。当通过流媒体协议获取到视频之后，就会将封装格式数据分离成为音频编码数据和视频编码数据。</p><p>然后，就是将音视频编码数据，解码成为非压缩的视频/音频原始数据。</p><p>最后，根据解封装模块处理过程中获取到的参数信息，同步解码出来的视频和音频数据，并将视频音频数据送至系统的显卡和声卡中进行播放。</p><h2 id="附录" tabindex="-1">附录 <a class="header-anchor" href="#附录" aria-label="Permalink to &quot;附录&quot;">​</a></h2><ul><li>视觉暂留原理</li></ul><p>视觉暂留（Persistence of vision）现象是光对视网膜所产生的视觉在光停止作用后，仍保留一段时间的现象。原因是由视神经的反应速度造成的，其时值约是 1/16 秒，对于不同频率的光有不同的暂留时间。</p><ul><li>视觉特性</li></ul><p>视网膜上有两种类型的光感受器细胞，分别是视杆细胞和视锥细胞。视杆细胞主要在昏暗的光线下工作，提供黑白视觉；而视锥细胞支持色彩感和清晰细致的视觉。</p><p>在人类眼中的视杆细胞比视锥细要多得多，而杆体细胞光敏感度比锥体细胞高 500 倍，所以人的眼睛对亮度变化比色彩变化更敏感。</p><ul><li>图像组</li></ul><p>视频编码是按照“组”来进行的，每一个组叫作 GOP（Group of Picture，图像组），表示一组连续的画面。</p><p>通常意义上的 GOP 由 I 帧开始，到下一个 I 帧之前的帧结束（严格意义上讲，GOP 由 IDR 帧开始，到下一个 IDR 帧之前的帧结束，这种情形下一个 GOP 中会有多个 I 帧。不过，通常 I 帧都是 IDR 帧）。</p><ul><li>物理术语</li></ul><p>频率是单位时间内完成周期性变化的次数，是描述周期运动频繁程度的量。单位为秒分之一，人们把频率的单位命名为赫兹，简称“赫”，符号为 Hz。</p><p>振幅是指振动的物理量可能达到的最大值，通常以 A 表示。它是表示振动的范围和强度的物理量。在声振动中，振幅是声压与静止压强之差的最大值，以分贝为单位。</p><p>波形表示信号的形状、形式，这个信号可以是波在物理介质上的移动，也可以是其他物理量的抽象表达形式。</p><h2 id="参考" tabindex="-1">参考 <a class="header-anchor" href="#参考" aria-label="Permalink to &quot;参考&quot;">​</a></h2><ul><li><a href="https://baike.baidu.com/item/%E8%A7%86%E9%A2%91/321962" target="_blank" rel="noreferrer">视频 - 百度百科</a></li><li><a href="https://baike.baidu.com/item/%E8%A7%86%E8%A7%89%E6%9A%82%E7%95%99/5125149" target="_blank" rel="noreferrer">视觉暂留 - 百度百科</a></li><li><a href="https://en.wikipedia.org/wiki/Video" target="_blank" rel="noreferrer">Video - Wikipedia</a></li><li><a href="https://zh.wikipedia.org/wiki/%E6%95%B0%E5%AD%97%E8%A7%86%E9%A2%91" target="_blank" rel="noreferrer">数字视频 - 维基百科，自由的百科全书</a></li><li><a href="https://wiki.mbalib.com/wiki/%E6%A8%A1%E6%8B%9F%E8%A7%86%E9%A2%91" target="_blank" rel="noreferrer">模拟视频 - MBA 智库百科</a></li><li><a href="https://zh.wikipedia.org/wiki/YUV" target="_blank" rel="noreferrer">YUV - 维基百科，自由的百科全书</a></li><li><a href="https://glumes.com/post/ffmpeg/understand-yuv-format/" target="_blank" rel="noreferrer">一文读懂 YUV 的采样与格式</a></li><li><a href="https://www.jianshu.com/p/538ee63f4c1c" target="_blank" rel="noreferrer">YUV 格式详解，只看这一篇就够了 - 简书</a></li><li><a href="https://www.youtube.com/watch?v=SjN_vCDi6_I" target="_blank" rel="noreferrer">RGB vs YUV (YCbCr) color models (AKIO TV) - YouTube</a></li><li><a href="https://zealforbeing.github.io/2018/04/12/iOS/%E8%A7%86%E9%9F%B3%E9%A2%91/%E8%A7%86%E9%A2%91%E6%92%AD%E6%94%BE%E7%AE%80%E5%8D%95%E5%8E%9F%E7%90%86/" target="_blank" rel="noreferrer">视频播放简单原理 | Z&#39;s blog</a></li><li><a href="https://www.cxyzjd.com/article/justloveyou_/88084171" target="_blank" rel="noreferrer">视频压缩相关概念介绍-IPB 与 GOP - 程序员宅基地</a></li><li><a href="https://www.youtube.com/watch?v=BxSPB3O8X6A" target="_blank" rel="noreferrer">电视机显像管的工作原理 磁场 高中物理 - YouTube</a></li><li><a href="https://www.youtube.com/watch?v=Sq6LE1OKuPU" target="_blank" rel="noreferrer">1080P 什么意思？电视与电影原理相同吗？李永乐老师讲解电视成像原理 - YouTube</a></li><li><a href="https://book.douban.com/subject/30124646/" target="_blank" rel="noreferrer">音视频开发进阶指南:基于 Android 与 iOS 平台的实践</a></li><li><a href="https://book.douban.com/subject/3877450/" target="_blank" rel="noreferrer">视频技术手册</a></li><li><a href="https://book.douban.com/subject/20509662/" target="_blank" rel="noreferrer">视频技术内幕</a></li></ul></div></div></main><footer class="VPDocFooter" data-v-536731fa data-v-9ab9576d><!--[--><!--]--><!----><!----></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter" data-v-eff2d9f0 data-v-e8553ae7><div class="container" data-v-e8553ae7><p class="message" data-v-e8553ae7>Developed by Kisstar & Powered by VitePress.</p><p class="copyright" data-v-e8553ae7>Copyright © 2023-present Kisstar</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"computer-graphics_index.md\":\"df61981b\",\"computer-graphics_render2screen.md\":\"c02c7cfb\",\"computer-graphics_transformations.md\":\"e848bb6c\",\"computer-graphics_texture.md\":\"3ea09c94\",\"computer-graphics_camera.md\":\"34437eb3\",\"computer-graphics_pipeline.md\":\"be339d71\",\"computer-graphics_opengl-pipeline.md\":\"71724dd1\",\"computer-graphics_software.md\":\"98a2fd05\",\"computer-graphics_hardware.md\":\"1d422b86\",\"effective-cpp_01-federation.md\":\"0bdcdab7\",\"effective-cpp_02-avoid-define.md\":\"71ddd8b8\",\"effective-cpp_index.md\":\"a6f28693\",\"index.md\":\"924f866f\",\"posts_audio_2022-02-08-digital-audio.md\":\"edca8cbd\",\"computer-graphics_coordinate.md\":\"3b93469f\",\"effective-cpp_12-copy-object.md\":\"f471f1da\",\"effective-cpp_05-default-fun.md\":\"5a1b8a68\",\"effective-cpp_06-refuse-explicitly.md\":\"f43922d2\",\"posts_vscode_2021-12-18-extensions.md\":\"81e9e842\",\"posts_video_2021-09-12-video-basic.md\":\"02ce641e\",\"posts_video_2021-10-26-videojs-plugin.md\":\"47582a19\",\"posts_git_2022-07-31-commitlint-custom.md\":\"91fd01d3\",\"posts_css_2022-04-03-color.md\":\"9bf0d946\",\"posts_audio_2022-01-29-basic-concepts.md\":\"488c7990\",\"posts_git_2021-06-14-commitlint.md\":\"01c89740\",\"computer-graphics_triangle.md\":\"61c57441\",\"effective-cpp_04-init-obj.md\":\"0263adee\",\"posts_electron_2023-04-16-electron-events.md\":\"b5d2538a\",\"effective-cpp_07-virtual-destructor.md\":\"f735050c\",\"effective-cpp_09-call-virtual-func.md\":\"c869c65e\",\"categories.md\":\"d1a2ad02\",\"posts_video_2022-03-17-web-video-basic.md\":\"83639c4f\",\"posts_js_2023-05-28-fe-binary.md\":\"4ce6efeb\",\"posts_video_2022-03-26-videojs-middleware.md\":\"434ffe8f\",\"tags.md\":\"cc417bae\",\"posts_nodejs_2021-04-12-koa.md\":\"453730dc\",\"posts_chrome_2021-10-23-dev-tools-tech.md\":\"b2448943\",\"tag.md\":\"14b41776\",\"posts_math_2021-08-03-matrix.md\":\"5afe736c\",\"effective-cpp_10-assignment-operator.md\":\"f3ca436a\",\"posts_comprehensive_2021-05-10-parallax-scrolling.md\":\"ef98d0a7\",\"posts_video_2022-05-05-videojs-modal.md\":\"ae76461f\",\"effective-cpp_03-use-const.md\":\"006a3656\",\"effective-cpp_11-assignment-self.md\":\"a686a660\",\"posts_video_2021-05-31-videojs.md\":\"a58d4f15\",\"effective-cpp_08-destructor-exception.md\":\"338c0c7d\",\"posts_video_2022-05-08-flv.md\":\"0c85acaf\",\"posts_vue_2021-09-28-vmodel.md\":\"08694a4c\",\"posts_video_2021-12-12-videojs-languages.md\":\"bbd98b18\",\"posts_video_2022-05-29-videojs-tech.md\":\"db046b5d\",\"posts_react_2020-02-21-react-redux.md\":\"96aa9ff7\",\"posts_vue_2020-02-05-vuex.md\":\"004805b0\",\"posts_vue_2023-11-05-vite.md\":\"b6a8c481\",\"posts_nodejs_2021-05-09-egg.md\":\"a3d749f7\",\"posts_js_2019-12-16-promise.md\":\"dcba65a6\",\"posts_video_2022-04-28-videojs-logger.md\":\"03acdb42\",\"posts_react_2019-12-16-redux.md\":\"1f0f67e0\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"Kisstar's 博客\",\"description\":\"Kisstar's 的个人博客站点。\",\"base\":\"/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/kisstar\"}],\"footer\":{\"message\":\"Developed by Kisstar & Powered by VitePress.\",\"copyright\":\"Copyright © 2023-present Kisstar\"}},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":false}");</script>
    
  </body>
</html>